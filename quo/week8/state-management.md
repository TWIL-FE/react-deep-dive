# 리액트와 상태 관리 라이브러리

## 상태 관리

- 상태란 어떠한 의미를 지닌 값이며, 지속적으로 변경될 수 있는 값이다.
- UI, URL, form, 서버에서 가져온 값 등이 있다.

### Flux Pattern

- 앱이 비대해지고 상태도 많아짐에 따라 어디서 어떤 일이 일어나서 상태가 변했는지 추적하기 어려워졌다.
- 이를 양방향 데이터 바인딩 때문이라 보고, 단방향으로 데이터 흐름을 변경하도록 했다.
- 기본 흐름: Action → Dispatcher → Store → View
  - Action: 처리할 액션과 데이터 정보.
  - Dispatcher: 액션을 스토어로 보냄.
  - Store: 상태 값과 이를 변경할 수 있는 메서드.
  - View: 스토어의 데이터를 가져와 화면을 렌더링.

### Redux

- 하나의 상태 객체를 스토어에 저장해 두고, 이 객체를 업데이트하는 작업을 디스패치해 업데이트를 수행한다. 이는 reducer 함수로 발생시키고, 앱 상태에 대한 새로운 복사본을 반환한 다음, 앱에 이 상태를 전파한다.
- props drilling 문제 해결.
- 하지만, 작성해야하는 코드가 너무 많았다. 지금은 많이 개선됨.

### Context API

- props drilling과 redux의 방대한 코드에 대한 문제를 해결하기 위해, 전역 상태를 하위 컴포넌트에 주입할 수 있는 Context API가 나왔다.
- 하지만, 상태 관리가 아닌 주입을 도와주는 기능이며, 렌더링을 막아주는 기능 또한 없다.

### Hooks, React Query, SWR

- Hook API의 등장으로 state를 쉽게 재사용할 수 있게 되었다.
- 이로 인해 API 호출에 대해 상태 관리를 하는 react query와 swr이 등장할 수 있었다. HTTP 요청에 특화된 상태 관리 라이브러리다.

### 범용 상태 관리 라이브러리(Recoil, Zustand, …)

- 훅을 이용해 작은 크기의 상태를 관리한다.
- 개발자가 원하는 만큼의 상태를 지역적으로 관리하는 것이 가능하다.

## 리액트 훅으로 시작하는 상태 관리

### useState, useReducer

- 상태 관리를 쉽게 재사용 할 수 있는 장점이 있다.
- 컴포넌트 별로 상태가 초기화되므로, 컴포넌트 간 상태 공유가 어렵다.(상태의 파편화, 클로저 내부에서 관리되어 local state로 생성됨)
- 외부 스토어에 값을 저장하고 상태를 컴포넌트 간에도 공유하기 위해서는 한 쪽에서 변화된 상태를 다른 쪽에서도 인지할 수 있도록 구독하고 리렌더링을 일으킬 훅이 필요하다.
